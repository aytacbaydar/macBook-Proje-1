<div class="konu-anlatim-container">
  <h2 class="baslik">Konu AnlatÄ±m SayfasÄ±</h2>

  <div class="kontrol-paneli">
    <div class="arac-grubu pdf-secici">
      <label for="pdf-yukle" class="btn-modern">
        <i class="ikon">ğŸ“„</i> PDF SeÃ§
      </label>
      <input type="file" id="pdf-yukle" (change)="pdfSecildi($event)" accept="application/pdf" class="gizli">
      <span *ngIf="secilenPDF" class="secilen-dosya">{{ secilenPDF }}</span>
    </div>

    <div *ngIf="pdfYuklendi" class="arac-grubu cizim-araclari">
      <div class="renk-secici">
        <button (click)="hizliRenkSec('#FF0000')" class="renk-btn kirmizi" [class.aktif]="kalemRengi === '#FF0000'" title="KÄ±rmÄ±zÄ±"></button>
        <button (click)="hizliRenkSec('#0000FF')" class="renk-btn mavi" [class.aktif]="kalemRengi === '#0000FF'" title="Mavi"></button>
        <button (click)="hizliRenkSec('#000000')" class="renk-btn siyah" [class.aktif]="kalemRengi === '#000000'" title="Siyah"></button>
      </div>

      <button (click)="kalemModunuAc()" class="btn-modern" [class.aktif]="!silgiModu">
        <i class="ikon">âœï¸</i> Kalem
      </button>

      <div class="kalem-boyutu">
        <label for="kalemBoyutu">KalÄ±nlÄ±k:</label>
        <select id="kalemBoyutu" [(ngModel)]="kalemKalinligi" (change)="ayarlaKalemOzellikleri()" class="boyut-secici">
          <option [value]="2">Ä°nce (2px)</option>
          <option [value]="4">Normal (4px)</option>
          <option [value]="8">KalÄ±n (8px)</option>
          <option [value]="12">Ã‡ok KalÄ±n (12px)</option>
          <option [value]="16">Ekstra KalÄ±n (16px)</option>
        </select>
      </div>

      <button (click)="silgiModunuAc()" class="btn-modern" [class.aktif]="silgiModu">
        <i class="ikon">ğŸ§¹</i> Silgi
      </button>
      
      <button (click)="temizleCanvas()" class="btn-modern temizle">
        <i class="ikon">ğŸ—‘ï¸</i> Temizle
      </button>
    </div>

    <div *ngIf="pdfYuklendi" class="arac-grubu sayfa-kontrolleri">
      <span class="sayfa-bilgisi">Toplam {{ totalPages }} sayfa</span>
      <button (click)="pdfBuyut()" class="btn-modern">
        <i class="ikon">ğŸ”</i> {{ zoom > 1 ? 'BÃ¼yÃ¼t' : 'BÃ¼yÃ¼t' }} ({{zoom}}x)
      </button>
      <button (click)="pdfKucult()" class="btn-modern">
        <i class="ikon">ğŸ”-</i> KÃ¼Ã§Ã¼lt
      </button>
      <button (click)="toggleTamEkran()" class="btn-modern ekran">
        <i class="ikon">{{ tamEkranModu ? 'â¬‡ï¸' : 'â¬†ï¸' }}</i> {{ tamEkranModu ? 'Normal Ekran' : 'Tam Ekran' }}
      </button>
    </div>

    <div *ngIf="pdfYuklendi" class="arac-grubu kaydetme-bolumu">
      <select [(ngModel)]="secilenGrup" class="grup-secici">
        <option value="" disabled selected>Ã–ÄŸrenci Grubu SeÃ§in</option>
        <option *ngFor="let grup of ogrenciGruplari" [value]="grup">{{ grup }}</option>
      </select>
      <button (click)="kaydet()" [disabled]="!secilenGrup || kaydetmeIsleminde" class="btn-modern kaydet">
        <i class="ikon">ğŸ’¾</i> {{ kaydetmeIsleminde ? 'Kaydediliyor...' : 'Kaydet' }}
      </button>
    </div>
  </div>

  <div class="calisma-alani">
    <div *ngIf="!pdfYuklendi && !dosyaBoyutuUyarisi" class="pdf-yukle-mesaj">
      LÃ¼tfen bir PDF dosyasÄ± seÃ§in
    </div>

    <div *ngIf="dosyaBoyutuUyarisi" class="buyuk-dosya-uyarisi">
      <p>SeÃ§tiÄŸiniz dosya 16 MB'tan bÃ¼yÃ¼k. BÃ¼yÃ¼k dosyalar yavaÅŸ yÃ¼klenebilir veya performans sorunlarÄ±na neden olabilir.</p>
      <p>Ã–neriler:</p>
      <ul>
        <li>Daha kÃ¼Ã§Ã¼k bir PDF dosyasÄ± kullanÄ±n</li>
        <li>PDF'i daha dÃ¼ÅŸÃ¼k Ã§Ã¶zÃ¼nÃ¼rlÃ¼kte kaydederek sÄ±kÄ±ÅŸtÄ±rÄ±n</li>
        <li>PDF'i bÃ¶lÃ¼mlere ayÄ±rÄ±p daha kÃ¼Ã§Ã¼k dosyalar halinde yÃ¼kleyin</li>
      </ul>
      <button (click)="optimizeEtVeYukle()" class="btn-optimize">Optimize Et ve YÃ¼kle</button>
    </div>

    <div *ngIf="pdfYuklendi" class="pdf-container" [class.tam-ekran]="tamEkranModu">
      <pdf-viewer
        [src]="pdfSrc"
        [render-text]="true"
        [original-size]="false"
        [fit-to-page]="false"
        [show-all]="true"
        [autoresize]="true"
        [page]="currentPage"
        [show-borders]="true"
        [external-link-target]="'blank'"
        [zoom]="zoom"
        [stick-to-page]="false"
        [stickToPage]="false"
        (after-load-complete)="pdfYuklendiHandler($event)"
        style="height: auto !important; width: 100% !important; position: relative; display: block; min-height: 100%;"
      ></pdf-viewer>
      <div class="canvas-wrapper">
        <canvas #canvas class="drawing-canvas"></canvas>
      </div>
      
      <!-- Sayfalar arasÄ± geÃ§iÅŸ iÃ§in footer -->
      <div class="pdf-footer" [class.tam-ekran-footer]="tamEkranModu">
        <div class="footer-content">
          <button (click)="sayfaBas()" class="btn-modern btn-sayfa">
            <i class="ikon">â®ï¸</i> Ä°lk Sayfa
          </button>
          <button (click)="oncekiSayfa()" class="btn-modern btn-sayfa" [disabled]="currentPage <= 1">
            <i class="ikon">â—€ï¸</i> Ã–nceki
          </button>
          <span class="sayfa-bilgisi">Sayfa {{ currentPage }} / {{ totalPages }}</span>
          <button (click)="sonrakiSayfa()" class="btn-modern btn-sayfa" [disabled]="currentPage >= totalPages">
            <i class="ikon">â–¶ï¸</i> Sonraki
          </button>
          <button (click)="sayfaSon()" class="btn-modern btn-sayfa">
            <i class="ikon">â­ï¸</i> Son Sayfa
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
